dnl Process this file with autoconf to produce a configure script.
AC_INIT(gtypist.c)

AM_INIT_AUTOMAKE(gtypist, 2.3.3)
AM_CONFIG_HEADER(config.h)

dnl Checks for progrdnl Set of available languages.
ALL_LINGUAS="es de"

AC_PROG_CC
AC_ISC_POSIX
AC_PROG_INSTALL
AC_PROG_LN_S

dnl Checks for libraries.

dnl Search for ncurses or curses
AC_SEARCH_LIBS(wbkgdset, ncurses curses,,echo "*** The ncurses library is required!";exit 1)

dnl Checks for header files.
AC_HEADER_STDC
AC_CHECK_HEADERS(sys/file.h unistd.h)

dnl Checks for typedefs, structures, and compiler characteristics.

dnl Checks for library functions.
AC_PROG_GCC_TRADITIONAL
AC_TYPE_SIGNAL

dnl internationalization macros
AM_GNU_GETTEXT

dnl Internationalization
AC_ARG_WITH(nointl,
        [  --with-nointl           disable internationalization],
	[],
	[
if test "x${prefix}" = "xNONE"; then
  AC_DEFINE_UNQUOTED(PACKAGE_LOCALE_DIR, "${ac_default_prefix}/${DATADIRNAME}/locale")
else
  AC_DEFINE_UNQUOTED(PACKAGE_LOCALE_DIR, "${prefix}/${DATADIRNAME}/locale")
fi])

AC_CHECK_PROG(HELP2MAN, help2man, help2man, no)
if (test "$HELP2MAN" = "no") then {
  GEN_MAN="echo \"Man pages cannot be generated see documentation with info\" >>gtypist.1"
} 
else
{
  GEN_MAN="help2man ./gtypist -o gtypist.1"
}
fi;

dnl this is necessary for tools/gtypist-mode.el
AM_PATH_LISPDIR

AC_SUBST(GEN_MAN)

AC_OUTPUT(po/Makefile.in intl/Makefile lessons/Makefile tools/Makefile doc/Makefile Makefile)

